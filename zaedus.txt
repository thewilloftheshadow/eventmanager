 
TheShadowToday at 1:16 AM
uhhh i feel like an idiot but can you help me with some d.js code?
 
NintendoZaedusToday at 1:16 AM
sure
I don't got much time
but I'll see what I can do
 
TheShadowToday at 1:17 AM
exports.run = (client, message, args, db) => {
    let cgc = client.guilds.get(client.config.cgcserver); //id for a server
    cgc.members.filter(m => !m.user.bot).forEach(async member => { 
        if(member.roles.some(r=>["Verified"].includes(r.name))){
          const bb = await client.guilds.get(client.config.bbserver); //id for second server
          const nickname = await bb.members.get(member.id).user.displayName
          message.channel.send(`Nickname: ${nickname} and Username: ${member.user.tag}`)
        }
    })
}
 
NintendoZaedusToday at 1:17 AM
what's the error?
 
TheShadowToday at 1:17 AM
(node:1451) UnhandledPromiseRejectionWarning: TypeError: Cannot read property 'user' of undefined
at
 
NintendoZaedusToday at 1:17 AM
what is m?
 
TheShadowToday at 1:17 AM
cgc.members.filter.foreach
m is the defined variable from the filter
 
NintendoZaedusToday at 1:18 AM
well m is a member correct?
so is m.user an actual method?
so what is the type of m?
m is clearly not a member if .user doesn't work
 
TheShadowToday at 1:20 AM
member object
hmmm
 
NintendoZaedusToday at 1:21 AM
https://discord.js.org/#/docs/main/stable/class/GuildMember?scrollTo=user
Discord.js
Discord.js is a powerful node.js module that allows you to interact with the Discord API very easily. It takes a much more object-oriented approach than most other JS Discord libraries, making your bot's code significantly tidier and easier to comprehend.

right here is has a path of user from guild member
so either A) Discord.js has some error in it's library or the more likely B) is that m is not a member object
just do 
console.log(typeof m);
and we'll know for sure
 
TheShadowToday at 1:24 AM
console.log(cgc.members) is giving member objects but typeof m is undefined
 
NintendoZaedusToday at 1:24 AM
could you send me whatever it logged with cgc.members
if it's too much then use https://pastebin.com/
Pastebin
Pastebin.com - #1 paste tool since 2002!
Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.

 
TheShadowToday at 1:25 AM
about 80 of these:
 user: 

   User {

     id: '238053637757075456',

     username: 'Onikiru',

     discriminator: '3680',

     avatar: 'b2ce68f27cfd440b5abb46735f45510a',

     bot: false,

     lastMessageID: null,

     lastMessage: null },

  joinedTimestamp: null,

  _roles: [],

  serverDeaf: false,

  serverMute: false,

  selfMute: undefined,

  selfDeaf: undefined,

  voiceSessionID: undefined,

  voiceChannelID: undefined,

  speaking: false,

  nickname: null,

  lastMessageID: null,

  lastMessage: null,

  deleted: false },

  '521397664794017792' => GuildMember {

  guild: 

   Guild {

     members: [Circular],

     channels: [Object],

     roles: [Object],

     presences: [Object],

     deleted: false,

     available: true,

     id: '454676657211703317',

     name: 'Cute Global Cats [CGC]',

     icon: 'e1d29bffa325fc6b3879177f008129fa',

     splash: null,

     region: 'eu-central',

     memberCount: 597,

     large: true,

     features: [],

     applicationID: null,

     afkTimeout: 300,

     afkChannelID: null,

     systemChannelID: '587195253208121345',

     embedEnabled: undefined,

     verificationLevel: 1,

     explicitContentFilter: 2,

     mfaLevel: 0,

     joinedTimestamp: 1559719057822,

     defaultMessageNotifications: 'MENTIONS',

     ownerID: '236067811569565696',

     _rawVoiceStates: Collection {},

     emojis: [Object] },
 
NintendoZaedusToday at 1:26 AM
that's so strange
user is a part of the object
yet it says it's undefined
 
TheShadowToday at 1:26 AM
losing the filter completely gave the same error
 
NintendoZaedusToday at 1:26 AM
m is undefinined
"cannot read property user of undefined" means that m is undefined
this is so strange
 
TheShadowToday at 1:27 AM
exactly XD
 
NintendoZaedusToday at 1:27 AM
ok let's go back to the basics
 
TheShadowToday at 1:27 AM
console.log(1+1)
2
 
NintendoZaedusToday at 1:27 AM
have you tried turning it on and off again
 
TheShadowToday at 1:27 AM
lmao yeah after each edit
 
NintendoZaedusToday at 1:28 AM
no I mean restart node
 
TheShadowToday at 1:28 AM
yeah
 
NintendoZaedusToday at 1:28 AM
maybe npm needs it's cache cleared or something
 
TheShadowToday at 1:28 AM
Nickname: undefined and Username: Kail#0044
 
NintendoZaedusToday at 1:29 AM
well nickname undefined means they don't have a nickname
 
TheShadowToday at 1:29 AM
they do tho
 
NintendoZaedusToday at 1:29 AM
npm cache clean
try that
but make sure nothing is running
 
TheShadowToday at 1:29 AM

reinstalled every package, force-clean cache, updated npm, same thing
 
NintendoZaedusToday at 1:32 AM
dang
have you loooked if anyone else is having that issue
 
TheShadowToday at 1:33 AM
just on the discord.js issue page
 
NintendoZaedusToday at 1:33 AM
anything?
 
TheShadowToday at 1:33 AM
nothing even mentioning it that i saw
 
NintendoZaedusToday at 1:34 AM
yeah I got nothing. I guess stackoverflow is your friend.
sorry man
 
TheShadowToday at 1:34 AM
sighs its fine, thanks for the help